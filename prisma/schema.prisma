// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model allowed_companies {
  Oid                   String    @id @default(uuid())
  ID                    String    @unique
  ACCOUNTNUMBER         String
  FIELDNAME             String
  APPROVEUSER           String?
  APPROVED              Boolean   @default(false)
  STATUS                Boolean   @default(false)
  INSERTDATE            DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE            DateTime? @default(now()) @db.Timestamp(6)
  INSERTUSER            String?
  UPDATEUSER            String?
  OptimisticLockField   Int?
  GCRecord              Int?
  branchName            String?
}

model merchant_users {
  ID                 String    @id @default(uuid())
  FULLNAME           String?
  ROLE               String?
  STATUS             String?
  ACCOUNTNUMBER      String
  ACCOUNTTYPE        String?
  PHONENUMBER        String    @unique
  DEVICENAME         String?
  ENCRYPTIONKEY      String?
  iV                 String?
  ISLOGGEDIN         Boolean?
  authenticationkey  String?
  FAILEDATTMEPTS     Int?
  LASTLOGINATTEMPT   DateTime? @db.Timestamp(6)
  ISLOCKED           Boolean?
  UNLOCKEDTIME       DateTime? @db.Timestamp(6)
  VALUE3             String?
  INSERTUSERID       String?
  UPDATEUSERID       String?
  INSERTDATE         DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE         DateTime? @default(now()) @db.Timestamp(6)
  ApplicationRole    Roles?    @relation(fields: [roleId], references: [ID])
  roleId             String?
}

model merchants_daily_balances {
  ID              String    @id @default(uuid())
  MERCHANTACCOUNT String?
  MERCHANTPHONE   String?
  DAILYBALANCE    Decimal?  @db.Decimal(18, 2)
  DAILYTXNCOUNT   Int?
  BALANCEDATE     DateTime? @db.Timestamp(6)
  INSERTDATE      DateTime? @db.Timestamp(6)
  UPDATEDATE      DateTime? @db.Timestamp(6)
  INSERTUSER      String?
  UPDATEUSER      String?
}

model merchant_txns {
  ID                   String    @id @default(uuid())
  MERCHANTACCOUNT      String?
  MERCHANTPHONE        String?
  AMOUNT               Decimal   @db.Decimal(18, 2)
  TXNID                String?
  CUSTOMERNAME         String?
  CUSTOMERACCOUNT      String?
  T24USER              String?
  T2TRANSACTIONDATE    DateTime? @db.Timestamp(6)
  STATUS               String?
  TRANSACTIONCHANNEL   String?
  TRANSACTIONSERVICE   String?
  VALUE1               String?
  VALUE2               String?
  VALUE3               String?
  INSERTDATE           DateTime? @db.Timestamp(6)
  UPDATEDATE           DateTime? @db.Timestamp(6)
  INSERTUSER           String?
  UPDATEUSER           String?
}

model arif_requests {
  ID                       String    @id @default(uuid())
  NONCEID                  String    @unique
  SESSIONID                String
  DEBITACCOUNT             String
  CREDITACCOUNT            String
  AMOUNT                   Decimal   @db.Decimal(18, 2)
  MERCHANTACCOUNT          String
  ARIFPAYTRANSACTIONID     String?
  ARIFPAYTRANSACTIONSTATUS String?
  T24TRANSACTIONID         String?
  T24TRANSACTIONSTATUS     String?
  WEBHOOKRESPONSE          String?
  REQUEST1                 String?
  RESPONSE1                String?
  ERROR1                   String?
  MESSAGE1                 String?
  DATESEND1                DateTime? @db.Timestamp(6)
  DATERECIVED1             DateTime? @db.Timestamp(6)
  REQUEST2                 String?
  RESPONSE2                String?
  ERROR2                   String?
  MESSAGE2                 String?
  DATESEND2                DateTime? @db.Timestamp(6)
  DATERECIVED2             DateTime? @db.Timestamp(6)
  REQUEST3                 String?
  RESPONSE3                String?
  ERROR3                   String?
  MESSAGE3                 String?
  DATESEND3                DateTime? @db.Timestamp(6)
  DATERECIVED3             DateTime? @db.Timestamp(6)
  SALESPHONE               String?
  WEBHOOKRECEIVEDDATE      DateTime? @db.Timestamp(6)
  INSERTUSER               String?
  UPDATEUSER               String?
}

model arifpay_endpoints {
  ID                 String    @id @default(uuid())
  BANK               String
  DISPLAYNAME        String
  OTPLENGTH          Int
  ORDER              Int       @unique
  ENDPOINT1          String?
  ENDPOINT2          String?
  ENDPOINT3          String?
  CANCELURL          String?
  ERRORURL           String?
  SUCCESSURL         String?
  NOTIFYURL          String?
  ISTWOSTEP          Boolean
  ISOTP              Boolean
  TRANSACTIONTYPE    String
  BENEFICIARYACCOUNT String
  BENEFICIARYBANK    String
  IMAGEURL           String
  INSERTDATE         DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE         DateTime? @default(now()) @db.Timestamp(6)
  INSERTUSER         String?
  UPDATEUSER         String?
}

model controllersconfigs {
  ID            String    @id @default(uuid())
  CONTROLLERKEY String    @unique
  APIKEY        String
  INSERTDATE    DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE    DateTime? @default(now()) @db.Timestamp(6)
  INSERTUSER    String?
  UPDATEUSER    String?
}

model core_integration_settings {
  ID         String    @id @default(uuid())
  UNIQUEKEY  String    @unique
  ADDRESS    String
  USERNAME   String
  PASSWORD   String
  INSERTDATE DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE DateTime? @default(now()) @db.Timestamp(6)
  INSERTUSER String?
  UPDATEUSER String?
}

model paystream_txns {
  ID                    String    @id @default(uuid())
  MERCHANTACCOUNTNUMBER String
  SALERPHONENUMBER      String
  TICKET                String
  ISCOMPLETED           Boolean
  AMOUNT                String
  PAYERACCOUNT          String?
  INSERTDATE            DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE            DateTime? @default(now()) @db.Timestamp(6)
  INSERTUSER            String?
  UPDATEUSER            String?
}

model stream_pay_settings {
  ID         String    @id @default(uuid())
  ADDRESS    String
  IV         String
  KEY        String
  HV         String
  USERNAME   String
  PASSWORD   String
  INSERTDATE DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE DateTime? @default(now()) @db.Timestamp(6)
  INSERTUSER String?
  UPDATEUSER String?
}

model ussd_push_settings {
  ID         String    @id @default(uuid())
  ADDRESS    String
  RESULTURL  String
  USERNAME   String
  PASSWORD   String
  INSERTDATE DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE DateTime? @default(now()) @db.Timestamp(6)
  INSERTUSER String?
  UPDATEUSER String?
}

model qr_payments {
  ID               String    @id @default(uuid())
  DEBITACCOUNT     String
  CREDITACCOUNT    String
  SALERPHONENUMBER String
  AMOUNT           Decimal   @db.Decimal(18, 2)
  QRCODE           String
  ISUSED           Boolean
  EXPIRETIME       DateTime? @db.Timestamp(6)
  INSERTDATE       DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE       DateTime? @default(now()) @db.Timestamp(6)
  INSERTUSER       String?
  UPDATEUSER       String?
}

model account_infos {
  ID            String    @id @default(uuid())
  ACCOUNTNUMBER String
  PHONENUMBER   String
  FULLNAME      String
  GENDER        String
  VALUE1        String?
  VALUE2        String?
  INSERTDATE    DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE    DateTime? @default(now()) @db.Timestamp(6)
  INSERTUSER    String?
  UPDATEUSER    String?
}

model promo_adds {
  ID           String    @id @default(uuid())
  ADDTITLE     String
  ADDSUBTITLE  String
  ADDADDRESS   String
  IMAGEADDRESS String
  ORDER        Int       @unique
  INSERTUSERID String?
  UPDATEUSERID String?
  INSERTDATE   DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE   DateTime? @default(now()) @db.Timestamp(6)
}

model Roles {
  ID           String    @id @default(uuid())
  ROLENAME     String    @unique
  description  String?
  INSERTDATE   DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE   DateTime? @default(now()) @db.Timestamp(6)

  SystemUsers  SystemUsers[]
  Merchant_users merchant_users[]
  capabilities role_capablities[]
  permissions dashboard_permissions[]
}

model role_capablities {
  ID           String    @id @default(uuid())
  MENUNAME     String?
  MENUNAME_am  String?
  ADDRESS      String?
  MENUORDER    Int?
  SUBMENUORDER Int?
  PARENT       Boolean?
  PARENTID     String?
  ROLEID       String
  role         Roles     @relation(fields: [ROLEID], references: [ID], onDelete: Cascade)
  INSERTDATE   DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE   DateTime? @default(now()) @db.Timestamp(6)

  @@unique([ROLEID, MENUORDER, SUBMENUORDER])
}

model SystemUsers {
  id        String   @id @default(uuid())
  name      String
  email     String   @unique
  password  String
  status    String
  roleId    String?
  role      Roles?   @relation(fields: [roleId], references: [ID])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model dashboard_permissions {
  id        String   @id @default(uuid())
  page      String
  roleId    String
  role      Roles    @relation(fields: [roleId], references: [ID], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([page, roleId])
}

model Branch {
  id                  String   @id @default(uuid())
  name                String   @unique
  code                String   @unique
  address             String
  contact             String
  status              String
  INSERTDATE          DateTime? @default(now()) @db.Timestamp(6)
  UPDATEDATE          DateTime? @default(now()) @db.Timestamp(6)
}

model AuditLog {
  id         String   @id @default(uuid())
  tableName  String
  recordId   String
  action     String // e.g., 'UPDATE', 'DELETE'
  oldValue   Json?
  newValue   Json?
  changedBy  String
  changedAt  DateTime @default(now())

  @@index([tableName, recordId])
}
